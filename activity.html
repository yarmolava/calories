<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Уровень активности</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">

  <h1>Выберите уровень<br>ежедневной активности</h1>

  <div class="list" id="activityList">
    <div class="activity-item" data-activity="1.2">😴 1.2 — минимальная</div>
    <div class="activity-item" data-activity="1.375">🏓 1.375 — лёгкая</div>
    <div class="activity-item" data-activity="1.55">🏋️ 1.55 — средняя</div>
    <div class="activity-item" data-activity="1.725">🏈 1.725 — высокая</div>
    <div class="activity-item" data-activity="1.9">🔥 1.9 — экстремальная</div>
  </div>

  <label class="manual">
    <input type="checkbox" id="manualCheck">
    Указать коэффициент вручную
  </label>

  <input
    id="manualValue"
    type="number"
    step="0.01"
    min="1"
    max="2.5"
    placeholder="Например 1.45"
    disabled
  >

  <button id="activityNext" disabled>Продолжить</button>

</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const activityItems = document.querySelectorAll(".list div[data-activity]");
  const manualCheck = document.getElementById("manualCheck");
  const manualValue = document.getElementById("manualValue");
  const activityNext = document.getElementById("activityNext");

  // выбор из списка
  if (activityItems.length && activityNext) {
    activityItems.forEach(item => {
      item.addEventListener("click", () => {
        activityItems.forEach(i => i.classList.remove("selected"));
        item.classList.add("selected");
        localStorage.setItem("activity", item.dataset.activity);
        activityNext.disabled = false;
      });
    });
  }

  // ручной ввод
  if (manualCheck && manualValue && activityNext) {
    manualCheck.addEventListener("change", () => {
      manualValue.disabled = !manualCheck.checked;
      activityNext.disabled = manualValue.disabled || !manualValue.value;
    });

    manualValue.addEventListener("input", () => {
      activityNext.disabled = !manualValue.value;
    });
  }

  // переход на следующую страницу
  if (activityNext) {
    activityNext.addEventListener("click", () => {
      if (manualValue && !manualValue.disabled && manualValue.value) {
        localStorage.setItem("activity", manualValue.value);
      }
      location.href = "data.html";
    });
  }
});
</script>

</body>
</html>
